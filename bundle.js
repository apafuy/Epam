(()=>{"use strict";const e=[{name:"Tesla",count:10,price:5e6},{name:"G-Wagon",count:100,price:1e8},{name:"Lada",count:50,price:1e5}];var t=document.querySelector(".table"),n=document.querySelector("#search"),a=document.querySelector("#add"),r=document.querySelector("#nameOption"),c=document.querySelector("#countOption"),o=document.querySelector("#priceOption"),i=[],d=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},s=function(e){var n=e.name,a=e.count,r=e.price,c=document.createElement("div");c.className="row",c.innerHTML='<div class="name nameItem">\n                        <p class="text productName">'.concat(n,'</p>\n                        <div class="circle" id="circle"><p class="text productCount">').concat(a,'</p></div>\n                    </div>\n                    <div class="price">\n                        <p class="columnName text">$').concat(d(r),'</p>\n                    </div>\n                    <div class="actions">\n                        <button class="text operation" data-name="').concat(n,'" data-count="').concat(a,'" data-price="$').concat(d(r),'" id="edit">Edit</button>\n                        <button class="text operation" data-name="').concat(n,'" id="delete">Delete</button>\n                    </div>');var o=c.querySelector("#circle");o.style.width="".concat(20*a.toString().length,"px"),o.style.height="".concat(20*a.toString().length,"px"),o.style.borderRadius="".concat(20*a.toString().length/2,"px"),t.append(c)},u=function(){var e=t.querySelectorAll(".row");Array.from(e).forEach((function(t){e[0]!==t&&t.remove()}))};e.forEach((function(e){s(e),i.push(e)})),t.addEventListener("click",(function(e){if("btnSortName"===e.target.id)u(),e.target.classList.contains("triangleDown")?i.sort((function(e,t){return e.name>t.name?1:-1})):i.sort((function(e,t){return e.name>t.name?-1:1})),e.target.classList.toggle("triangleDown"),i.forEach((function(e){return s(e)}));else if("btnSortPrice"===e.target.id)u(),e.target.classList.contains("triangleDown")?i.sort((function(e,t){return e.price>t.price?-1:1})):i.sort((function(e,t){return e.price>t.price?1:-1})),e.target.classList.toggle("triangleDown"),i.forEach((function(e){return s(e)}));else if("delete"===e.target.id){var t=document.querySelector("#modalWrapper"),n=document.querySelector("#modal");t.classList.remove("hidden"),t.classList.add("modalWrapper"),n.addEventListener("click",(function(n){if("Да"===n.target.textContent){t.classList.remove("modalWrapper"),t.classList.add("hidden");var a=i.filter((function(t){return t.name!==e.target.dataset.name}));u(),a.forEach((function(e){s(e)})),i=Array.from(a)}else"Нет"===n.target.textContent&&(t.classList.remove("modalWrapper"),t.classList.add("hidden"))}))}else"edit"===e.target.id&&(a.textContent="Update",r.value=e.target.dataset.name,r.setAttribute("data-name",e.target.dataset.name),c.value=e.target.dataset.count,o.value=e.target.dataset.price)})),n.addEventListener("click",(function(){var t=document.querySelector("#inputSearch").value.toLowerCase().trim();""===t?(u(),i=[],e.forEach((function(e){s(e),i.push(e)}))):t.length&&(u(),(i=e.filter((function(e){return e.name.toLowerCase().includes(t)?1:0}))).forEach((function(e){return s(e)})))})),c.addEventListener("input",(function(e){var t=e.target;t.value=t.value.replace(/[^0-9]/g,"")})),o.addEventListener("input",(function(e){var t=e.target;t.value=t.value.replace(/[^0-9,]/g,"")})),c.addEventListener("change",(function(e){for(var t=e.target,n=t.value;"0"===n[0];)n=n.substring(1,n.length);t.value=n})),o.addEventListener("blur",(function(e){var t=e.target;if(t.value){for(var n=t.value;"0"===n[0]||"$"===n[0];)n=n.substring(1,n.length);n=n.replace(/[^0-9]/g,""),t.value="$".concat(d(n))}})),o.addEventListener("focus",(function(){"$"===o.value[0]&&(o.value=o.value.substring(1,o.length))})),a.addEventListener("click",(function(){var t=r.value.trim(),n=c.value,d=o.value,l=document.querySelector("#nameError"),m=document.querySelector("#countError"),v=document.querySelector("#priceError");l.classList.add("hidden"),m.classList.add("hidden"),v.classList.add("hidden");var p=!0;if("Update"!==a.textContent&&e.forEach((function(e){e.name.toLocaleLowerCase()===t.toLocaleLowerCase()&&(l.textContent="Товар с таким именем уже есть",l.classList.remove("hidden"),p=!1)})),(0===t.length||t.length>15)&&(l.textContent="Поле заполнено не верно!",l.classList.remove("hidden"),p=!1),n||(m.classList.remove("hidden"),p=!1),d||(v.classList.remove("hidden"),p=!1),p&&"Add"===a.textContent)e.push({name:t,count:Number(n),price:Number(d.replace(/[^0-9]/g,""))}),i.push(e[e.length-1]),s(e[e.length-1]);else if(p&&"Update"===a.textContent){var g=function(e){return e.name===r.dataset.name},f=e.findIndex(g),h=i.findIndex(g);e[f].name=t,e[f].count=Number(n),e[f].price=Number(d.replace(/[^0-9]/g,"")),i[h].name=t,i[h].count=Number(n),i[h].price=Number(d.replace(/[^0-9]/g,"")),u(),i.forEach((function(e){s(e)})),a.textContent="Add",l.classList.add("hidden"),m.classList.add("hidden"),v.classList.add("hidden")}}))})();
//# sourceMappingURL=bundle.js.map